<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Daily Planet News</title>
  </head>
  <body>
    <h1>What's happening today... all articles</h1>
    <div>
      <% articles.forEach(function(article, id){ %>
        <article>
          <h2 class="article_title"><%= article.title %></h2>
          <p class="article_body"><%= article.body %></p>
          <a class="delete-link" href="/articles/<%= + id %>/destroy">Delete</a>
        </article>
      <% }); %>
    </div>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
    <script>
      $(".delete-link").on("click", function(event){
        event.preventDefault();
        var articleElement = $(this);
        var articleURL = articleElement.attr("href");
        $.ajax({
          method: "DELETE",
          url: articleURL
        }).done(function(data){
          console.log(data);
          // remove article from client side
          window.location = "/articles";
        });
      });
    </script>
  </body>
</html>
